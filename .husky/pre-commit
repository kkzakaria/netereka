#!/bin/sh

echo "üîç V√©rification des types TypeScript..."
npx tsc --noEmit
TSC_EXIT=$?

echo ""
echo "üîç V√©rification du linting ESLint..."
npm run lint
LINT_EXIT=$?

if [ $TSC_EXIT -ne 0 ] || [ $LINT_EXIT -ne 0 ]; then
  echo ""
  echo "‚ùå =============================================="
  echo "‚ùå  COMMIT BLOQU√â"
  echo "‚ùå =============================================="
  echo ""
  if [ $TSC_EXIT -ne 0 ]; then
    echo "  ‚Üí Des erreurs TypeScript ont √©t√© d√©tect√©es."
  fi
  if [ $LINT_EXIT -ne 0 ]; then
    echo "  ‚Üí Des erreurs ESLint ont √©t√© d√©tect√©es."
  fi
  echo ""
  echo "  Corrigez ces erreurs avant de commit."
  echo "  NE PAS utiliser --no-verify pour bypasser."
  echo ""
  exit 1
fi

echo ""
echo "‚úÖ Types et lint OK ‚Äî commit autoris√©."
